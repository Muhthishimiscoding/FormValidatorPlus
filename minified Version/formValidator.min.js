var[Validator,SubmitForm]=function(){"use strict";class e{static REG_SPECIAL=/[^\p{L}0-9\s.]/u;static imgMimeTypes=["image/jpeg","image/jpg","image/png","image/bmp","image/webp"];constructor(e,t={},s=null){this.customMessages=t,this.rules=e,this.data=s,this.errors={}}static setRegexSpecial(t){e.REG_SPECIAL=t}setRules(e){return this.rules=e,this}setErrorMessages(e){return this.customMessages?this.customMessages={...this.customMessages,...e}:this.customMessages=e,this}static setImgMimeTypes(t){e.imgMimeTypes=t}static get RULE_REQUIRED(){return"required"}static get RULE_EMAIL(){return"email"}static getUtcDate(e=null){e||(e=new Date);let t=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds());return new Date(t)}static getDate(t){let s;return"number"==typeof t?((s=e.getUtcDate()).setUTCFullYear(s.getUTCFullYear()-t),s.setUTCHours(0,0,0,0)):"string"==typeof t?(s=new Date(t),s=e.getUtcDate(s)):s=t instanceof Date?t:e.getUtcDate(),s}static setMaxdate(s,r=null){let i=t.selectElem(s,HTMLInputElement,!0),a=e.getDate(r);i[0].max=a.toISOString().split("T")[0]}static setNum(e,s=!1){let r=t.selectElem(e,HTMLElement,!0);r.on("input",function(){let e=r.val();r.val(e.replace(/\D/g,"")),s&&e>s&&r.val(e.slice(0,e.length-1))})}static setPhone(e,s=!1,r=10,i=[2,5]){let a=t.selectElem(e,HTMLElement,!0);a.on("input",function(e){let t="",l="",n=!1;s?(r=10===r?13:r,(t=a.val().replaceAll(/[^0-9+]/g,"")).includes("+")||(l="+",n=!0)):t=a.val().replace(/\D/g,"");for(let o=0;o<Math.min(t.length,r);o++)(!(s&&l.includes("+"))||"+"!=t[o])&&(l+=t[o],i.includes(o)&&(l+=" "));n||"+"!==l||(l=""),a.val(l.trimEnd())})}formatDateTimeWithAMPM(e){let t=e.getUTCHours(),s=e.getUTCMinutes(),r=t>=12?"pm":"am";t%=12,t=t||12,s=s<10?"0"+s:s;let i=`${e.getUTCDate()} ${["January","February","March","April","May","June","July","August","September","October","November","December"][e.getUTCMonth()]},${e.getUTCFullYear()} till ${t}:${s} ${r}`;return i}static liveVerify(t){let s;s=t.hasOwnProperty("rules")?t.rules:t;let r=new e(s,t?.errorMsgs||{}),i=t?.callback;if(i){if("function"!=typeof i)throw TypeError("callback paratemer needs to be a function")}else i=r.showErrors.bind(r);for(let a in r.rules)if(r.rules.hasOwnProperty(a)){let l=$(`[name="${a}"]`),n=r.resolveRule(a);l.on("blur",function(){if(n.includes("required")){let e="file"===l[0].type?null:l.val();0==r.required(e,null,a)&&(r.putError(a,"required"),i(a,r.errors,r.rules,this))}}),l.on("input",async function(){2===await r.verify(l.val(),a,n)&&r.errors.hasOwnProperty(a)&&delete r.errors[a],i(a,r.errors,r.rules,r)})}}static getfileSize(e){if(e<1024)return e+" bytes";if(e<1048576){let t=e/1024;return t%1==0?t+" kb":t.toFixed(2)+" kb"}if(e<1073741824){let s=e/1048576;return s%1==0?s+" mb":s.toFixed(2)+" mb"}if(e<1099511627776){let r=e/1073741824;return r%1==0?r+" gb":r.toFixed(2)+" gb"}{let i=e/1099511627776;return i%1==0?i+" TB":i.toFixed(2)+" TB"}}addFunc(t,s,r){if("function"==typeof t){if("string"!=typeof s||"string"!=typeof r)throw TypeError("You must provide ruleName and errorMessage for your function",t);if("function"==typeof e.prototype[s])throw TypeError("A rule with this name already exists kindly rename of your rule.");e.prototype[s]=t,e.prototype.errorMessages={...e.prototype.errorMessages,ruleName:r}}throw Error(`${s} does not refer to a function`)}static extend(t,s=null,r=null){if("function"==typeof t)e.prototype.addFunc(t,s,r);else for(let i in t)t.hasOwnProperty(i)&&e.prototype.addFunc(t[i].callback,i,t[i].msg)}get errorMessages(){return{alpha:"This field needs to contain only alphabatic characters i.e A to z.",alpha_s:"This field can only have only alphabatic characters i.e A to z and space",alphaNumeric:"This field can only contain alphanumeric characters.",alphaNumeric_s:"Thie fields can only contain alphanumeric characters and space.",date:"Please enter a valid date in the format YYYY-MM-DD.",dateAll:"Please enter a valid date",dateTime:"Please enter a valid date and time in the format YYYY-MM-DD HH:MM:SS.",required:"This field is required.",email:"Please provide a valid email address.",min:"The field should contain a minimum of {min} characters.",max:"The field should contain a maximum of {max} characters.",noSpecial:"This field should not contain any special characters like $, #, &, @, or >.",space:"This field must contain at least one space.",noSpace:"This field should not contain any spaces.",lowerCase:"This field should contain lowercase letters.",upperCase:"This field should contain uppercase letters.",numb:"This field should contain only digits.",maxnumb:"This field should not exceed {max} digits.",minnumb:"This field should contain at least {min} digits.",tillDate:"The date of this field should be selected before {tillDate}.",shouldOld:"Age Requirement: You must be at least {shouldOld} years old to access this feature/content.",fileSize:"The maximum allowed file size is {fileSize} and your file size is {fileSize2}.",fileType:"The allowed file types are {fileType}",image:"The uploaded file is not a valid image. Allowed image types are {image}.",fileExt:"The file is not of valid type allowed file types are {fileExt}.",dimension_equal:"The uploaded image has a width of {givenWidth}px and height of {givenHeight}px, while the required dimensions are {expectedWidth}x{expectedHeight} pixels.",dimension_smallest:"The smallest accepted width and height are {expectedWidth}x{expectedHeight} pixels, but your image is smaller than that, {givenWidth}x{givenHeight}.",dimension_highest:"The largest accepted width and height are {expectedWidth}x{expectedHeight} pixels, but your image is larger than that, {givenWidth}x{givenHeight}.",dimension_width:"The expected width for this image is {width}px.",dimension_height:"The expected height for this image is {height}px.",dimension_square:"This image needs to be a square, meaning it should have the same height and width, like 500x500 pixels.",dimension_square_size:"This image needs to be square with a width and height of {expectedWidth}x{expectedHeight} pixels.",dimension_aspectRatio:"The image must have an aspect ratio of {aspectRatio}.",detectMultipleSpaces:"This field has multiple consecutive spaces.",accept:"Please check this checkbox.",range:"The entered number must be between {num1} to {num2}.",numb:"This field needs to be a valid number without any space",numb_space:"This field needs to be a valid number.",numb_space_double:"This field contains more spaces then it should.",password:"This field needs to contain small case, uppercase, special characters i.e $,#,% etc and digits characters and has a length of atleast {password} characters.",hasLowerCase:"The field needs to have a lower case character.",hasUpperCase:"The field needs to have a upper case character.",hasSpecial:"The field needs to have a special character like $, #, @, & etc.",hasDigit:"The field needs to have a numeric digit [0-9].",same:"This field must match with the {same}.",inList:"The field must be of any of these {inList}.",url:"Please enter a valid HTTP or HTTPS URL.",url_ftp:"Please enter a valid HTTP or HTTPS or FTP URL.",zipCode:"Please enter a valid ZIP/Postal code.",json:"The provided JSON structure is not valid.",ipv4:"Please enter a valid IPv4 address.",ipv6:"Please enter a valid IPv6 address.",isbn:"Please enter a valid ISBN (ISBN-10 or ISBN-13).",upca:"Please enter a valid UPC-A (Universal Product Code).",ean13:"Please enter a valid EAN-13 (European Article Number)."}}getUserError(e,t){return this.customMessages?.[e]?.[t]||this.customMessages?.[`${e}_${t}`]}getError(e,t,s="An unknown error occured."){return this.getUserError(e,t)||this.errorMessages?.[t]||s}getDimensionError(t,s,r={},i="dimension"){return this.customMessages?.[t]?.[i]?.[s]||this.customMessages?.[`${t}_${i}_${s}`]||e.strReplace(this.errorMessages[`${i}_${s}`],r)}resolveDimensionErrors(e,t,s,r,i){this.errors[e]=this.getDimensionError(e,t,{givenWidth:r,givenHeight:i,expectedWidth:s[0],expectedHeight:s[1]})}addError(t,s,r=null){let i=this.getError(t,s);if(r){let a=r;switch(s){case"tillDate":"number"==typeof r&&(r=-r),a=this.formatDateTimeWithAMPM(e.getDate(r));break;case"shouldOld":r instanceof Date&&(a=r.getUTCFullYear());break;case"image":case"fileType":case"inList":case"fileExt":a=r.join(", ")}i=i.replace(`{${s}}`,a)}this.errors[t]=i}putError(t,s,r=null,i=!0){return r?this.errors[t]=e.strReplace(this.getError(t,s),r,i):this.errors[t]=this.getError(t,s),2}getErrors(){return this.errors}static strReplace(e,t,s=!0){for(let r in t)t.hasOwnProperty(r)&&(e=s?e.replace(`{${r}}`,t[r]):e.replace(r,t[r]));return e}addOrRemoveClass(e,t,s=!1){let r=$(`[name="${e}"]`);r.removeClass("is-invalid"),r.next().filter(".invalid-feedback")?.remove(),s&&(r.addClass("is-invalid"),r.after(`<div class="invalid-feedback"><span class="text-danger">${t}</span></div>`))}baseShowErrors(e){this.errors.hasOwnProperty(e)?this.addOrRemoveClass(e,this.errors[e],!0):this.rules.hasOwnProperty(e)&&this.addOrRemoveClass(e)}showErrors(e=null){if(e)this.baseShowErrors(e);else for(let t in this.rules)this.baseShowErrors(t)}static async verifyData(t,s=null){let r,i=t?.callback;t.hasOwnProperty("rules")?r=new e(t.rules,t?.errorMsgs||{},t.data):s instanceof e&&((r=s).data=t.data);let a;if(r.data instanceof FormData){for(let l in r.rules)if(await r.verify(a=r.data.getAll(l),l,r.resolveRule(l)))continue}else if("object"==typeof r.data)for(let n in r.rules)await r.verify(a=r.data[n],n,r.resolveRule(n));let o=r.isFailed();if(!o){if(void 0===i)r.showErrors();else if("function"==typeof i)i(r.errors,r.rules,r);else throw TypeError("The given callback needs to be a function.")}return o}isFailed(){return 0===Object.keys(this.errors).length}async verify(e,t,s){if(void 0===s)return 2;if((0===Object.keys(e).length||void 0===e)&&s.includes("accept"))return this.accept(void 0,null,t);for(let r of s){let i=r,a=null;if("string"==typeof r)r.includes(":")&&([i,a]=r.split(":"));else if("object"==typeof r)for(let l in r)i=l,a=r[l];if("function"==typeof this[i]){if("string"==typeof e){let n=await this.baseVerifier(i,t,a,e);if(1===n)return 1;if(2===n)continue}else for(let o of e){let u=await this.baseVerifier(i,t,a,o);if(1===u)return 1;if(2===u)continue}}else throw Error("There is no rule defined with name "+i+".")}return 2}async baseVerifier(e,t,s,r){if("required"!==e&&"string"==typeof r&&0==r.trim().length)return 2;let i=await this[e](r,s,t);switch(i){case!1:case 0:return this.addError(t,e,s),1;case 2:return 1}return 2}resolveRule(e){return"string"==typeof this.rules[e]?this.rules[e].split("|"):this.rules[e]}getData(e,s=!1){if(this.data instanceof FormData)return s?this.data.getAll(e):this.data.get(e);if(this.data)return!s&&(this.data[e]instanceof FileList||Array.isArray(this.data[e]))?this.data?.[e][0]:this.data[e];let r=t.selectElem(`[name="${e}"]`,HTMLElement);return"file"===r.type?s?r.files:r.files?.[0]:(0,r.value)}checkNumber(e,t){if(isNaN(e=Number(e)))throw TypeError(`In ${t} you didn't pass a valid number to validate this rule.`);return e}checkFile(e){return e instanceof File&&"pplication/octet-stream"!==e}accept(e,s,r){return t.selectElem(`[name='${r}']`,HTMLInputElement,!0).prop("checked")?1:(this.addError(r,"accept"),2)}alpha(e,t){return t?/^[\p{L}\s]+$/u.test(e):/^[\p{L}]+$/u.test(e)}alphaNumeric(e,t){return t?/^[\p{L}\p{N}\s]+$/u.test(e):/^[\p{L}\p{N}]+$/u.test(e)}lowerCase(e,t){return t?/^[\p{Lowercase}\s]+$/u.test(e):/^[\p{Lowercase}]+$/u.test(e)}upperCase(e,t){return t?/^[\p{Uppercase}\s]+$/u.test(e):/^[\p{Uppercase}]+$/u.test(e)}detectMultipleSpaces(e,t,s,r="detectMultipleSpaces"){let i=e.replace(/\s+/g," ")===e;return i||this.putError(s,r)}email(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}hasLowerCase(e){return/[\p{Lowercase}]/u.test(e)}hasUpperCase(e){return/[\p{Uppercase}]/u.test(e)}hasSpecial(t){return e.REG_SPECIAL.test(t)}noSpace(e){return!/\s+/g.test(e)}noSpecial(t){return!e.REG_SPECIAL.test(t)}max(e,t){return!(e.trim().length>t)}min(e,t){return!(e.trim().length<t)}same(e,t){return e===this.getData(t)}space(e,t){let s=/\s+/g.test(e);return s&&t?this.detectMultipleSpaces(e,key):s}password(t,s,r){let i=!1;return(this.hasLowerCase(t)?this.hasUpperCase(t)?this.hasDigit(t)?this.hasSpecial(t)?this.min(t,s||8)||(i="min"):i="hasSpecial":i="hasDigit":i="hasUpperCase":i="hasLowerCase",i)?(this.errors[r]=this.getUserError(r,i)||this.getUserError(r,"password")||e.strReplace(this.errorMessages[i],{"{min}":s||8,field:"password"},!1),2):1}hasDigit(e){return/[0-9]/.test(e)}minnumb(e,t){return!(e>t)}maxnumb(e,t){return!(e<t)}numb(e){return/^[0-9]+$/.test(e)}numb_space(e,t,s){e=e.trim();let r=/^[0-9 ]+$/.test(e);return r&&t&&this.detectMultipleSpaces(e,null,s,"numb_space"),r}range(e,t,s){return e.trim().length>0&&(e<t[0]||e>t[1])?this.putError(s,"range",{num1:t[0],num2:t[1]}):1}shouldOld(t,s){s=this.checkNumber(s,"shouldrule");let r=new Date(t);return r=e.getUtcDate(r),e.getUtcDate().getUTCFullYear()-r.getUTCFullYear()<s}tillDate(t,s){return"number"==typeof s&&(s=-s),s=e.getDate(s),!(e.getUtcDate(new Date(t)).getTime()>s.getTime())}dateAll(e){return this.date(e)||this.date(e,"YYYY/DD/MM")||this.date(e,"MM/DD/YYYY")||this.date(e,"DD/MM/YYYY")||this.date(e,"YYYY-MM-DD")}date(e,t){let s="YYYY-DD-MM";t&&(s=t);let r=/^\d{4}-\d{1,2}-\d{1,2}$/,i=2,a=1,l=0;if("YYYY-MM-DD"==s)i=1,a=2;else if("YYYY/DD/MM"==s)r=/^\d{4}\/\d{1,2}\/\d{1,2}$/;else if("MM/DD/YYYY"==s||"DD/MM/YYYY"==s){r=/^\d{1,2}\/\d{1,2}\/\d{4}$/;let n="DD/MM/YYYY"==s;i=n?1:0,a=n?0:1,l=2}if(!r.test(e))return!1;let o=e.includes("-")?"-":"/",u=e.split(o).map(Number),h=u[a],c=u[i],d=u[l];if(d<1e3||d>3e3||c<1||c>12||h<1)return!1;let p=[31,28,31,30,31,30,31,31,30,31,30,31];return(d%4==0&&d%100!=0||d%400==0)&&(p[1]=29),h<=p[c-1]}dateTime(e,t){let s=e.split(" "),r;if(r=t?this.date(s?.[0],t):this.dateAll(s?.[0])){let i=s?.[1]?.split(":")?.map(Number);return i?.length===3&&!(i[0]>23)&&!(i[0]<0)&&!(i[1]>59)&&!(i[1]<0)&&!(i[2]>59)&&!(i[2]<0)&&/^\d{1,2}:\d{1,2}:\d{1,2}$/.test(s?.[1])}return r}fileSize(t,s,r){return(s=this.checkNumber(s,"fileSize"),t instanceof File&&t.size>s)?this.putError(r,"fileSize",{fileSize:e.getfileSize(s),fileSize2:e.getfileSize(t.size)}):1}fileType(e,t){return!this.checkFile(e)||t.includes(e.type)}fileExt(e,t){return this.checkFile(e)?t.includes(e.name.split(".").pop()):1}dimension(t,s,r){return new Promise(i=>{if((s?.mimeTypes||e.imgMimeTypes).includes(t.type)){let a=new FileReader;a.onload=e=>{let t=new Image;t.src=e.target.result,t.onload=()=>{let e=t.width,a=t.height;if(s.hasOwnProperty("height")||s.hasOwnProperty("width"))s?.height&&s.height!==a&&(this.errors[r]=this.getDimensionError(r,"height",{height:a})),s?.width&&s.width!==e&&(this.errors[r]=this.getDimensionError(r,"width",{width:e}));else if(s.hasOwnProperty("equal"))(s.equal[0]!==e||s.equal[1]!==a)&&this.resolveDimensionErrors(r,"equal",s.equal,e,a);else if(s.hasOwnProperty("smallest")||s.hasOwnProperty("highest"))s?.smallest&&(e<s.smallest[0]||a<s.smallest[1])&&this.resolveDimensionErrors(r,"smallest",s.smallest,e,a),s?.highest&&(e>s.highest[0]||a>s.highest[1])&&this.resolveDimensionErrors(r,"highest",s.highest,e,a);else if(s.hasOwnProperty("square"))0===s.square?e!==a&&(this.errors[r]=this.getDimensionError(r,"square",{})):e===s.square&&a===s.square||this.resolveDimensionErrors(r,"square_size",[s.square,s.square],e,a);else if(s.hasOwnProperty("ratio")){let l=s.ratio;if("string"==typeof l){let[n,o]=l.split(":");if(isNaN(l=n/o))throw TypeError(`The string given as aspectRatio ${s.ratio} is invalid the format of string should be like this 16:9, 4.809889:1.788923 etc.`)}Math.abs(e/a-l)<(s?.difference||.1)||(this.errors[r]=this.getDimensionError(r,"aspectRatio",{aspectRatio:s.ratio}))}i(2)}},a.readAsDataURL(t)}else i(this.image(t,s?.mimeTypes,r))})}image(t,s,r){if(t instanceof File){let i=e.imgMimeTypes;if(s&&(i=s),!i.includes(t.type)&&"application/octet-stream"!==t.type)return this.addError(r,"image",i),2}return 1}required(e,s,r){return"string"!=typeof e?t.selectElem(`[name="${r}"`,HTMLElement)?.files?.length>0?1:0:e.trim().length>0?1:0}inList(e,t){return t.includes(e)}url(e,t,s){return t?/^(https?|ftp):\/\/[^\s/$.?#].[^\s]*$/i.test(e)?1:this.putError(s,"url_ftp"):/^https?:\/\/[^\s/$.?#].[^\s]*$/i.test(e)}zipCode(e){return/^\d{5}(?:-\d{4})?$/.test(e)}json(e,t=null){try{let s=JSON.parse(e);if(t)return"object"==typeof s&&null!==s;return 1}catch(r){return 0}}ipv4(e){return/^(\d{1,3}\.){3}\d{1,3}$/.test(e)}ipv6(e){return/^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$|^::$|^::1$/.test(e)}isbn(e){return/^(?:\d{9}[\dXx]|\d{12})$/.test(e)||/^(?:\d{13})$/.test(e)}calculateChecksum(e){let t=e.split("").map(Number),s=t.pop(),r=t.filter((e,t)=>t%2==0).reduce((e,t)=>e+t,0),i=t.filter((e,t)=>t%2==1).reduce((e,t)=>e+t,0);return{checkDigit:s,oddSum:r,evenSum:i}}upca(e){if(12===(e=e.replace(/\D/g,"")).length){let{checkDigit:t,oddSum:s,evenSum:r}=this.calculateChecksum(e);return(3*s+r+t)%10==0}return!1}ean13(e){if(13===(e=e.replace(/\D/g,"")).length){let{checkDigit:t,oddSum:s,evenSum:r}=this.calculateChecksum(e);return(10-(3*r+s)%10)%10===t}return!1}regex(e,t){return t.test(e)}notRegex(e,t){return!t.test(e)}}class t{static readBlobAsBase64(e,s=1){return new Promise((r,i)=>{let a=new FileReader;s*=1048576;let l=0,n=[];function o(){let t=e.slice(l,l+s);a.readAsDataURL(t),l+=t.size}a.onload=function(s){if(0===n.length?n.push(s.target.result):n.push(s.target.result.split(",")[1]),l<e.size)o();else{let i=n.join("");r({name:e.name,filesize:e.size,type:e.type,lastModified:e.lastModified,base64:i,base64size:t.base64size(i)})}},a.onerror=function(){i(a.error)},o()})}static base64size(e){let t=e.includes(",")?e.split(",")[1]:e,s=t.length,r=0;for(;"="===t[s-r-1];)r++;return 3*s/4-3*r/4}static #a(s,r){if(null!==r.inputs){if(Array.isArray(r.inputs))for(let i of r.inputs)s=t.#b(s,i,r.overwrite);else if("object"==typeof r.inputs)s=t.#b(s,r.inputs,r.overwrite);else throw TypeError("Object, FormData and arrays are only allowed "+typeof r.inputs+"  is not allowed.")}return s}static #b(a,l,n){if(l instanceof FormData)for(let o of new Set(l.keys())){let u=l.getAll(o);a=t.#c(a,o,u,n)}else for(let h of Object.keys(l))a=t.#c(a,h,l[h],n);return a}static #c(c,d,p,f){let m=!("overwritenone"===f||"overwritefiles"===f);if(c=t.overWritedata(c,d,f),"object"==typeof p||Array.isArray(p)||p instanceof FileList)for(let g of p)!c.has(d)||c.get(d) instanceof File||!m||c.delete(d),c.append(d,g);else c.append(d,p);return c}static selectElem(e,t=HTMLFormElement,s=!1){let r=null;if(e instanceof t?r=e:"string"==typeof e?r=s?$(e):document.querySelector(e):e?.[0] instanceof t&&(r=s?e:e[0]),!(r instanceof t||r?.[0] instanceof t))throw TypeError(`No element in dom exists with this ${e} selector.`);return r}static fileInputs(e){return t.selectElem(e).querySelectorAll('input[type="file"]')}static async selectFiles(e,s=!1){let r={},i=t.fileInputs(e);if(i.length>0){for(let a of i)if(a.files.length>0){let l=a.getAttribute("name");try{if(r[l]=a.files,s){let n=[];for(let o in r){for(let u in r[o])n.push(await t.readBlobAsBase64(u));r[o]=n}}}catch(h){console.error(h)}}}return r}static quickSumbit(e){t.selectElem(e.form).onsubmit=async s=>{s.preventDefault(),await t.justSubmit(e)}}static overWritedata(e,t,s){return"overwritenone"!==s&&("overwriteall"===s&&e.has(t)?e.delete(t):"overwritefiles"===s&&e.has(t)?e.get(t) instanceof File&&e.delete(t):"overwritebutnotfiles"===s&&e.has(t)&&!(e.get(t) instanceof File)&&e.delete(t)),e}static async justSubmit(s){(s={overwrite:"overwriteAll",inputs:null,...s}).overwrite=s.overwrite.toLowerCase();let r={type:"POST",...s.ajaxSettings},i="json"===r?.dataType?.toLowerCase(),a;if(s.form instanceof HTMLFormElement||"string"==typeof s.form){let l=t.selectElem(s.form);a=new FormData(l)}else"object"==typeof s.form&&(a=s.form);if(a instanceof FormData&&(s.hasOwnProperty("resetKeys")&&s.resetKeys.forEach(e=>a.delete(e)),a=t.#a(a,s)),s.hasOwnProperty("validate")||s.hasOwnProperty("rules")){if(s.validate instanceof e){if(!await e.verifyData({data:a},s.validate))return!1}else if(s.hasOwnProperty("validate")&&!await e.verifyData({data:a,...s.validate})||!await e.verifyData({data:a,rules:s.rules}))return!1}if(i&&(r.hasOwnProperty("contentType")||(r.contentType="application/json"),r.hasOwnProperty("processData")||(r.processData=!1),a=await t.objectToJson(a,s.overwrite)),r.data=a,!r.hasOwnProperty("success")&&s.hasOwnProperty("responseElem")){let n,o=!1;"string"==typeof s.responseElem?n=$(s.responseElem):(n=$(s.responseElem.elem),o=s.responseElem.key),r.success=e=>{n.css("display","block"),o?n.html(e[o]):n.html(e)}}$.ajax(r)}static inJson(e,t=!1){if(t){let s={};return e.forEach(e=>{s[e.name]=e.value}),JSON.stringify(s)}return e}static async #d(y,w,_,v){let b=[],T=[];for(let D of _)D instanceof File?b.push(await t.readBlobAsBase64(D)):T.push(D);return b.length>0&&(y[w]=b),T.length>0&&b.length>0?v&&T.length>1?y[`${w}_text`]=T:y[`${w}_text`]=T[T.length-1]:T.length>0&&(y[w]=v?T:T[T.length-1]),y}static async objectToJson(e,s){let r={},i="overwritenone"===s||"overwritefiles"===s;if(e instanceof FormData)for(let a of new Set(e.keys())){let l=e.getAll(a);l.length>1?r=await t.#d(r,a,l,i):l[0]instanceof File?r[a]=await t.readBlobAsBase64(l[0]):r[a]=l[0]}else for(let n in e)e[n]instanceof FileList||Array.isArray(e[n])?r=await t.#d(r,n,inputs,i):e[n]instanceof File?r[n]=await t.readBlobAsBase64(e[n]):r[n]=e[n];return JSON.stringify(r)}}return[e,t]}();